"use strict";!function t(e,n,a){function i(c,s){if(!n[c]){if(!e[c]){var o="function"==typeof require&&require;if(!s&&o)return o(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+c+"'")}var u=n[c]={exports:{}};e[c][0].call(u.exports,function(t){var n=e[c][1][t];return i(n?n:t)},u,u.exports,t,e,n,a)}return n[c].exports}for(var r="function"==typeof require&&require,c=0;c<a.length;c++)i(a[c]);return i}({1:[function(t,e,n){(function(n){function a(t,e){return 1===arguments.length?i(t):r(t,e)}function i(t){return JSON.parse(f.getItem(t))}function r(t,e){try{return f.setItem(t,JSON.stringify(e)),!0}catch(n){return!1}}function c(t){return f.removeItem(t)}function s(){return f.clear()}var o=t("./stub"),u=t("./tracking"),f="localStorage"in n&&n.localStorage?n.localStorage:o;a.set=r,a.get=i,a.remove=c,a.clear=s,a.on=u.on,a.off=u.off,e.exports=a}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./stub":2,"./tracking":3}],2:[function(t,e,n){function a(t){return t in s?s[t]:null}function i(t,e){return s[t]=e,!0}function r(t){var e=t in s;return e?delete s[t]:!1}function c(){return s={},!0}var s={};e.exports={getItem:a,setItem:i,removeItem:r,clear:c}},{}],3:[function(t,e,n){(function(t){function n(){t.addEventListener?t.addEventListener("storage",a,!1):t.attachEvent?t.attachEvent("onstorage",a):t.onstorage=a}function a(e){function n(t){t(JSON.parse(e.newValue),JSON.parse(e.oldValue),e.url||e.uri)}e||(e=t.event);var a=c[e.key];a&&a.forEach(n)}function i(t,e){c[t]?c[t].push(e):c[t]=[e],s===!1&&n()}function r(t,e){var n=c[t];n.length>1?n.splice(n.indexOf(e),1):c[t]=[]}var c={},s=!1;e.exports={on:i,off:r}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(t,e,n){var a=t("local-storage");!function(t,e,n,a,i){var r={cache:function(){this.$document=t(n),this.$content=t("#content"),this.$tabs=t("#tabs"),this.$add=t("#add"),this.$remove=t("#remove"),this.$activeTab={}},bindEvents:function(){var e=this;this.$document.on("keyup","#content",function(){var t,n,a;t=e.getState(),n=e.getActiveKey(),a=e.getText(),t[n].text=a,e.setState(t),e.setTabName(e.$activeTab,a)}),a.on("content",function(t){e.$tabs.html(""),e.$content.val(""),e.init()}),this.$add.on("click",function(){e.addTab()}),this.$remove.on("click",function(){e.removeTab()}),this.$tabs.on("click","li",function(n,a){var i=t(n.target);e.changeTab(i)})},changeTab:function(t){var e,n,a;e=this.getActiveKey(),n=t.attr("data-tab-id"),e!=n&&(a=this.getState(),a=this.replaceObjValues(a,"active",!1),a[n].active=!0,this.setState(a),this.changeActiveTab(n),this.insertText(a[n].text),this.cacheActiveTab(t))},addTab:function(){var e,n,a,i;e=this.getState(),n=this.getDefaultState(),a=Object.keys(n).toString(),e=this.replaceObjValues(e,"active",!1),t.extend(e,n),i=n[a].text,this.setState(e),this.appendTabsToDOM(n),this.changeActiveTab(a),this.insertText(i),this.cacheActiveTab(),this.setTabName(this.$activeTab,i)},removeTab:function(){var t,e,n;if(t=this.getActiveKey(),e=this.getState(),!(Object.keys(e).length<=1)){delete e[t];var n=Object.keys(e).reduce(function(t,e){return e>t?e:t},"0");e[n].active=!0,this.setState(e),this.removeTabFromDOM(t),this.changeActiveTab(n),this.cacheActiveTab()}},appendTabsToDOM:function(t){var e=this;return Object.keys(t).forEach(function(n){var a=t[n].active?'<li class="tab active" data-tab-id="'+n+'"></li>':'<li class="tab" data-tab-id="'+n+'"></li>';e.$tabs.append(a)}),this},removeTabFromDOM:function(t){return this.$tabs.find('.tab[data-tab-id="'+t+'"]').remove(),this},setTabName:function(t,e){t.text(e.split("\n").shift().slice(0,15)||"...")},cacheActiveTab:function(e){return this.$activeTab=e?e:t("#tabs .tab.active"),this},changeActiveTab:function(t){return this.$tabs.find(".tab").removeClass("active").filter('[data-tab-id="'+t+'"]').addClass("active"),this},getText:function(){return this.$content.val()},insertText:function(t){return this.$content.val(t),this},setState:function(t){var e=arguments.length<=1||arguments[1]===i?"content":arguments[1];return a.set(e,t),this},getState:function(){var t=arguments.length<=0||arguments[0]===i?"content":arguments[0];return a.get(t)},getActiveState:function(){var t=arguments.length<=0||arguments[0]===i?this.getState():arguments[0],e=this.getActiveKey(t);return t[e]},getActiveKey:function(){var t=arguments.length<=0||arguments[0]===i?this.getState():arguments[0],e={};return Object.keys(t).forEach(function(n){t[n].active&&(e=n)}),e},getDefaultState:function(){var t={};return t[Date.now()]={text:"",active:!0},t},replaceObjValues:function(e,n,a){var i;return i=t.extend({},e),Object.keys(i).forEach(function(t){i[t][n]=a}),i},init:function(){var e,n,a,i,r=this;this.cache(),n=this.getState(),n||(n=this.getDefaultState(),this.setState(n)),this.appendTabsToDOM(n),this.$tabs.find(".tab").each(function(e,c){a=t(c),i=a.attr("data-tab-id"),r.setTabName(a,n[i].text)}),this.cacheActiveTab(),this.bindEvents(),e=this.getActiveState().text,this.insertText(e)}};t(n).ready(function(){r.init()})}(jQuery,window,document,a)},{"local-storage":1}]},{},[4]);